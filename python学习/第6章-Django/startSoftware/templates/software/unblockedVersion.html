{#login/templates/login/index.html#}

{% extends 'software_base.html' %}
{% load staticfiles %}
{% block title %}解封版信息收集{% endblock %}

{% block content %}

{% block css %}
<style type="text/css">

    .title{
        font-weight: bold;
        color: green;
    }

    #uploadFile_con{
        text-align: center;
    }

    #uploadFile_con a:hover{
        background-color: gold;
        color: red;
    }

    .pull-left{
        color: #3e8f3e;
        font-weight: bold;
    }

    .form-group input:hover,#reset_btn:hover,#link_index:hover,#link_top:hover,#submit_btn:hover{
        color:red;
        background-color: gold;
    }

    .delfile_msg{
        color:red;
        text-align: center;
        font-size: 20px;
    }

    #reset_btn{
        margin-left: 35%;
    }

    #submit_btn{
        margin-right: 35%;
    }

    #link_index,#link_top{
        text-decoration: none;
        color: #fff;
    }

    .unblockedVersion_table{
        text-align: center;
        background-color: #f6ffff;
    }

    .table_title{
        background-color: #2e6da4;
        text-align: center;
    }

    .table_title_content{
        margin: 10px;
        color: #fff;
    }

    .table_data{
        text-align: center;
        max-width: 1000px

    }

    .table_text{
        width: 100%;
        height: 100%;
        text-align: center;
        display: block;
    }

    .table_th{
        height: 100px;
    }

    .table_th textarea{
        line-height: 50px
    }

    .delete_btn{
        margin: 5px;
        background-color: IndianRed;
        border-color: IndianRed;
    }

    .delete_btn:hover{
        color: red;
        background-color: gold;
        border-color: IndianRed;
    }

    .table_td button{
        padding: 15px 0;
        background-color: green;
        color: #FFF;
    }

    .table_text{
        background-color: LightGreen;
    }

    .select{
        padding: 15px 0;
        background-color: green;
        color: #FFF;
        border-radius: 5px;
    }

    .table_th .right{
        margin: 5px !important;
    }

</style>
{% endblock %}
<div class="col-md-12 col-md-offset-0" id="uploadFile_con">
    {% if request.session.is_login %}
        {% if dirObjectList is none %}
            <!--<h1>您好,{{ request.session.user_name }}！欢迎回来！</h1>-->
            <h1 class="title">解封版信息收集</h1>
        {% endif %}
    {% else %}
        <h2>你尚未登录，只能访问公开内容！</h2>
    {% endif %}


    <br>
    {% if message %}
        <div class="alert alert-warning delfile_msg">{{ message }}</div>
    {% endif %}
            <table border="1"  cellspacing="50" class="unblockedVersion_table">
                <tr>
                    <!--<th class="table_title"><div class="table_title_content">序号</div></th>-->
                    <th class="table_title"><div class="table_title_content">月份</div></th>
                    <th class="table_title"><div class="table_title_content">团队</div></th>
                    <th class="table_title"><div class="table_title_content">版本号</div></th>
                    <th class="table_title"><div class="table_title_content">子系统名称</div></th>
                    <th class="table_title"><div class="table_title_content">版本名称</div></th>
                    <th class="table_title"><div class="table_title_content">版本内容</div></th>
                    <th class="table_title"><div class="table_title_content">版本编制人</div></th>
                    <th class="table_title"><div class="table_title_content">开发负责人</div></th>
                    <th class="table_title"><div class="table_title_content">测试负责人</div></th>
                    <th class="table_title"><div class="table_title_content">所属开发组</div></th>
                    <th class="table_title"><div class="table_title_content">版本类型</div></th>
                    <th class="table_title"><div class="table_title_content">申请解封时间</div></th>
                    <th class="table_title"><div class="table_title_content">确认封版时间</div></th>
                    <th class="table_title"><div class="table_title_content">解封版类别</div></th>
                    <th class="table_title"><div class="table_title_content">解封版说明及根因分析</div></th>
                    <th class="table_title"><div class="table_title_content">操作</div></th>
                </tr>

                <tr>
                    <!--<form class='form-register' action="unblockedVersion" method="post" target="iframe">-->
                    <form class='form-register' action="unblockedVersion" method="post">
                        {% csrf_token %}
                        <input type="text" name="options" value="insert" style="display:none;">

                        <td class="table_th table_td">
                            <select class="select" name="month" required>
                                <option value="">请选择</option>
                                <option value="1">1月份</option>
                                <option value="2">2月份</option>
                                <option value="3">3月份</option>
                                <option value="4">4月份</option>
                                <option value="5">5月份</option>
                                <option value="6">6月份</option>
                                <option value="7">7月份</option>
                                <option value="8">8月份</option>
                                <option value="9">9月份</option>
                                <option value="10">10月份</option>
                                <option value="11">11月份</option>
                                <option value="12">12月份</option>
                            </select>
                        </td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='team'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='version_number'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='subsystem'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='version_name'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="512" class="table_text" name='content'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='version_compiler'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='version_leader'  required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='test_leader' required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='development_team' required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='version_type' required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='unblocked_datetime' required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='blocked_datetime' required></textarea></td>
                        <td class="table_th"><textarea maxlength="128" class="table_text" name='unblocked_type' required></textarea></td>
                        <td class="table_th"><textarea maxlength="1024" placeholder="注意：不能超出1024个字数！" class="table_text" name='unblocked_reason' required></textarea></td>
                        <td class="table_th"><button type="submit" class="btn btn-primary pull-right right" id="submit_btn">提交</button></td>
                    </form>
                </tr>

                {% for versionInfo in unblocked_versionInfo_list %}
                    {% if versionInfo.isDelete is not none %}
                        {% if versionInfo.username == request.session.user_name %}
                            <tr>
                                <!--<th class="table_data">{{versionInfo.pk}}</th>-->
                                <td class="table_data">{{versionInfo.month}}</td>
                                <td class="table_data">{{versionInfo.team}}</td>
                                <td class="table_data">{{versionInfo.version_number}}</td>
                                <td class="table_data">{{versionInfo.subsystem}}</td>
                                <td class="table_data">{{versionInfo.version_name}}</td>
                                <td class="table_data">{{versionInfo.content}}</td>
                                <td class="table_data">{{versionInfo.version_compiler}}</td>
                                <td class="table_data">{{versionInfo.version_leader}}</td>
                                <td class="table_data">{{versionInfo.test_leader}}</td>
                                <td class="table_data">{{versionInfo.development_team}}</td>
                                <td class="table_data">{{versionInfo.version_type}}</td>
                                <td class="table_data">{{versionInfo.unblocked_datetime}}</td>
                                <td class="table_data">{{versionInfo.blocked_datetime}}</td>
                                <td class="table_data">{{versionInfo.unblocked_type}}</td>
                                <td class="table_data">{{versionInfo.unblocked_reason}}</td>
                                <td>
                                    <form class='table_data' action="unblockedVersion" method="post">
                                        {% csrf_token %}
                                        <input type="text" name="options" value="delete" style="display:none;">
                                        <input type="text" name="id" value="{{versionInfo.id}}" style="display:none;">
                                        <button type="submit" class="btn btn-primary delete_btn" onclick="if(confirm('确定删除？')){return true;}else{return false;}{this.form.submit();}">删除</button>
                                    </form>
                                </td>
                            </tr>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </table>

        {% comment  %}
        <!--<iframe id="iframe" name="iframe" style="display:none;"></iframe>-->

        <!--{% for _ in count|get_range %}-->
        <!--<option>{{ forloop.counter }}</option>-->
        <!--{% endfor %}-->
        {% endcomment  %}

        <!--<br><br><br><hr>-->
        <!--<a class="btn btn-primary pull-left" id="link_index" href="/">返回首页</a>-->
        <br><br><br><br><br><br>
        <!--<a class="btn btn-primary pull-left" id="link_top" href="#">回到顶部</a>-->
        <!--<br><br><br><br>-->

</div>
{% endblock %}