{% extends 'software_base.html' %}

{% block title %}添加常用应用快捷键{% endblock %}

{% block css %}

    .container a:hover,.container button:hover{
        color:red;
    }

{% endblock %}

{% block scripts %}
<script type="text/javascript">
        window.onload = function () {

            var oDiv = document.getElementById('con');
            // oDiv.style.width = '300px';
            oDiv.style.height = '200px';
            oDiv.style.border = '2px solid red';
            oDiv.style.fontSize = '20px';
            oDiv.style.textAlign = 'center';

            var oBtn = document.getElementById('btn');
            oBtn.value = '隐藏实时日志';
            oBtn.onclick = changeWindow;

            function changeWindow() {
                if(oDiv.style.display=='none'){
                    oDiv.style.display = 'block';
                    oBtn.value = '隐藏实时日志';
                }
                else{
                    oDiv.style.display = 'none';
                    oBtn.value = '显示实时日志';
                }
            }
        }
</script>

{% endblock %}
{% block content %}
<h1>您好,{{ request.session.user_name }}！欢迎回来！</h1>
<hr>
<div class="container">
        <input id="btn" type="button" name="" value="切换">
        <div id="con" >隐藏窗口&显示窗口</div>
        <hr>
        <div class="alert alert-warning">
            {% if message %}
                <h3 style="color: #3c763d">定时任务列表</h3>
            {% endif %}
            {% if successful_message %}
                <h4 style="color: #3c763d; text-align: center;">{{successful_message}}</h4>
            {% endif %}
            {% if failure_msg %}
                <h4 style="color: red; text-align: center;">{{failure_msg}}</h4>
            {% endif %}
        </div>
        <table cellspacing="50" style="border-collapse:separate; border-spacing:20px 8px;border:2px solid lightskyblue;">
            <tr  style="font-size: 16px">
                <th>线程ID</th>
                <th>执行时间</th>
                <th>设置目标时间</th>
                <th>目标服务器IP</th>
                <th></th>
            </tr>
            {% for roleInfo in timersList %}
                {% if roleInfo.isDelete %}
                    {{continue}}
            {% else %}
                    <tr style="font-size: 16px">
                        <td align="left" valign="middle">{{roleInfo.clientJobID}} </td>
                        <td align="left" valign="middle">{{roleInfo.execTime}}:00 </td>
                        <td align="left" valign="middle">{{roleInfo.setTime}}:00</td>
                        <td align="left" valign="middle">{{roleInfo.serverIP}}</td>
                        <td align="left" valign="middle">
                        <form action="delServerDate" onclick="if(confirm('确定删除？')){return true;}else{return false;}{this.form.submit();}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary pull-right"  name="clientJobID" value="{{roleInfo.clientJobID}}">删除</button>
                        </form>
                        </td>
                    </tr>
            {% endif %}
                {% endfor %}
        </table>
        <h4 style="color: red">删除定时任务:（填写线程ID）</h4>
        <div class="form-group" style="font-size: 18px">
            <form class='form-register' action="delServerDate" method="post">
                {% csrf_token %}
                {{ deldate_form.MyJobID.label_tag }}
                {{ deldate_form.MyJobID }}
            <button type="submit" class="btn btn-primary">确认删除</button>
            </form>
        </div>

    <form class='form-register' action="setServerDate" method="post">
        <div class="alert alert-warning">
            {% if message %}
            <h3 style="color: #3c763d">{{message}}</h3>
            {% endif %}
        </div>
        {% csrf_token %}
        <h3 style="color: blue">执行日期和时间:</h3>
        <div class="form-group" style="font-size: 18px">
            {{ date_form.Datetime.label_tag }}
            {{ date_form.Datetime }}
        </div>
        <h3 style="color: blue">服务器信息填写:</h3>
        <div class="form-group" style="font-size: 18px">
            {{ date_form.ServerIP.label_tag }}
            {{ date_form.ServerIP }}
        </div>
        <div class="form-group" style="font-size: 18px">
            {{ date_form.ServerDatetime.label_tag }}
            {{ date_form.ServerDatetime }}
        </div>
        <!--<div class="col-md-4">-->
        <button type="reset" class="btn btn-default">重置</button>
        <button type="submit" class="btn btn-primary" style="margin-left: 225px">提交</button>
        <!--</div> &lt;!&ndash; /container &ndash;&gt;-->
    </form>
        <br>
        <br>
        <hr>
        <a class="btn btn-primary" href="/">返回首页</a>
        <br>
        <hr>
        <a class="btn btn-primary" href="#">回到顶部</a>
        <br>
        <br>
</div>
{% endblock %}
